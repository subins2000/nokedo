(function(e,t){var n=function(){return new n.fn.init};n.fn=n.prototype={version:"1.0.1",constructor:n,init:function(){return this}};n.fn.init.prototype=n.fn;t.speedo=n})(jQuery,window);(function(e,t){var n=t.fn,r={},i=["opera","chrome","safari","firefox"],s;s=document.createElement("div");s.innerHTML="<!--[if IE]><i></i><![endif]-->";s=null!=s.getElementsByTagName("i")[0];r.is_ie=s;for(key in i){s=navigator.userAgent;var o=s.match(RegExp(i[key],"i"));r["is_"+i[key]]=null!==o}if(r.is_ie){var i=3,u=document.createElement("div");for(s=u.getElementsByTagName("i");u.innerHTML="<!--[if gt IE "+ ++i+"]><i></i><![endif]-->",s[0];);r.version=new String(4<i?i:0);r.version.high=r.version}else{s=navigator.userAgent;if((o=s.match(/(opera|chrome|safari|firefox)\/?\s*(\.?\d+(\.\d+)*)/i))&&null!=(u=s.match(/version\/([\.\d]+)/i)))o[2]=u[1];o=o?o[2]:navigator.appVersion;r.version=new String(o);r.version.high=parseInt(r.version)}n.browser=r})(jQuery,speedo);(function(e,t){t.fn.utility={set_cookie:function(e,t,n){var r=new Date;r.setDate(r.getDate()+n);t=escape(t)+(null==n?"":"; expires="+r.toUTCString());document.cookie=e+"="+t},get_cookie:function(e){for(var t=document.cookie.split(";"),n="",r="",r=[],i=0;i<t.length;i++)if(r=t[i].split("="),n=r[0].replace(/^\s+|\s+$/g,""),r=r[1],n==e)return unescape(r);return null},query_parameters:function(e){e=e.split("+").join(" ");e=e.split("?")[1];for(var t={},n=/[?&]?([^=]+)=([^&]*)/g,r;r=n.exec(e);)t[decodeURIComponent(r[1])]=decodeURIComponent(r[2]);return t},same_domain:function(e,t){var n=e.match(/^(https?:\/\/)?([\da-z\.-]+)\/?/),r=t.match(/^(https?:\/\/)?([\da-z\.-]+)\/?/);alert(r);return void 0==n[3]||void 0==r[3]?!1:n[3].toLower()==r[3].toLower()}}})(jQuery,speedo);(function(e,t){function n(){var t={};this.add_action=function(e,n){void 0==t[e]&&(t[e]=[]);t[e].push(n)};this.remove_action=function(e,n){if(void 0!=t[e])for(key in t[e])t[e][key]===n&&(t[e]=t[e].splice(key,1))};this.trigger=function(n,r){var i=!1;if(void 0!=t[n])for(key in t[n])e.isFunction(t[n][key])&&(t[n][key](r),i=!0);return i}}var r=function(e){return new r.fn.init(e)};r.fn=r.prototype={version:"2.0.1",constructor:r,init:function(r){function i(t){t=t?t:r.href;m=!1;if((null==t||""==t)&&r.htmlContent)return"html";if(t.match(g))return"image";var n="";e.each(y,e.proxy(function(e,i){if(t.split("?")[0].match(i.regex)){if(i.token){"vimeo"==e&&"video"==t.split("/")[3]&&(i.index=4);var s=t.split(i.token)[i.index].split("?")[0].split("&")[0];t=i.url.replace("{id}",s)}r.width=r.width?r.width:640;r.height=r.height?r.height:360;r.href=t;m=!0;n=i.iframe?"iframe":"flash"}},this));if(""==n){r.useFrame||0<=t.indexOf("http")?(n="iframe",m=!0,r.href=t):n="ajax";var i=t.indexOf("#");-1!=i&&(i=t.substr(i),i=e(i),0<i.length&&(n="html",r.htmlContent=i.html()))}return n}function s(e){27==(e.keyCode||e.charCode||e.which)&&o.hidePopup()}var o=this,u=0,a=0,f=0,l=0,c=null,h=null,p=null,d=null,v=null,m=!1,g=/\.(jpg|jpeg|gif|png|bmp|tiff)(.*)?$/i,y={swf:{regex:/[^\.]\.(swf)\s*$/i},youtube:{regex:/youtube\.com\/watch/i,url:"http://www.youtube.com/embed/{id}?autoplay=1&fs=1&rel=0",token:"=",iframe:1,index:1},google:{regex:/google\.com\/videoplay/i,url:"http://video.google.com/googleplayer.swf?autoplay=1&hl=en&docId={id}",token:"=",index:1},vimeo:{regex:/vimeo\.com/i,url:"http://player.vimeo.com/video/{id}?hd=1&autoplay=1&show_title=1&show_byline=1&show_portrait=0&color=&fullscreen=1",token:"/",iframe:1,index:3},metacafe:{regex:/metacafe\.com\/watch/i,url:"http://www.metacafe.com/fplayer/{id}/.swf?playerVars=autoPlay=yes",token:"/",index:4}};this.instance_name="instance_"+5233*Math.random();this.extend=new n;this.overlay=this.container=null;this.create_popup=function(){r.theme=r.theme.toLowerCase();var n=r.theme&&"default"!=r.theme?" speedo-theme-"+r.theme:"";if(0<r.startCount){var s=t().utility.get_cookie("speedo-popup-start-count"),s=s?s:0;if(s>=r.startCount)return;s++;t().utility.set_cookie("speedo-popup-start-count",s,r.interval)}e("body").addClass("speedo-popup-ready");c=e(document.createElement("div"));c.addClass("speedo-container"+n);o.container=c;r.css3Effects&&"none"!=r.css3Effects&&c.addClass("speedo-effect-"+r.css3Effects.toLowerCase());c.css({display:"none",width:r.width?r.width:"auto",height:r.height?r.height:"auto","min-width":150,"min-height":150,left:"center"==r.left?"50%":r.left,top:"center"==r.top?"50%":r.top});c.appendTo("body");r.caption&&""!=r.caption&&(s=e(document.createElement("p")),s.addClass("speedo-popup-caption"),s.html(r.caption),c.append(s));p=e(document.createElement("div"));p.addClass("speedo-popup-loading");c.append(p);d=e(document.createElement("div"));d.addClass("speedo-content-holder");d.appendTo(c);var u;s=r.buttons;if(e.isArray(s)&&0<s.length){var a=["html","action"],f=e(document.createElement("div"));f.addClass("speedo-popup-custom-buttons");for(var l=0;l<s.length;l++){var m=e(document.createElement("a"));m.attr("href","javascript: void(0);");s[l].html&&m.html(s[l].html);for(u in s[l])-1==a.indexOf(u)&&m.attr(u,s[l][u]);e.isFunction(s[l].action)&&m.click(s[l].action);f.append(m)}u=f}else u=!1;!1!==u&&c.append(u);u=i();o.setContent("html"!=u?r.href:r.htmlContent,u);r.close&&(h=e(document.createElement("a")),h.addClass("speedo-ui-close"),h.attr("href","javascript: void(0);"),h.click(function(e){r.onClose(e);o.hidePopup()}),h.html(r.closeCaption),c.append(h));r.overlay&&(v=e(document.createElement("div")),v.addClass("speedo-overlay"+n),v.appendTo("body"),o.overlay=v,"object"==typeof r.overlay&&e.extend({opacity:.7,zindex:1e4},r.overlay),r.overlayClose&&v.click(function(e){r.onClose(e);o.hidePopup()}));this.modules.execute(o,r);r.onBeforeShow(c.get(0));o.centerPopup();e(window).resize(function(){o.centerPopup()});o.showPopup();setTimeout(function(){o.centerPopup()},100)};this.init=function(){r.esc&&e(document).bind("keydown",s)};this.showPopup=function(){if(m){var e=i();o.setContent(r.href,e)}if(!o.extend.trigger("show")||null==r.effectIn||"none"==r.effectOut)c.show(),v&&v.show();o.centerPopup();r.onShow(c.get(0));r.autoClose&&setTimeout(function(){o.hidePopup()},r.autoClose)};this.hidePopup=function(){if(!o.extend.trigger("hide")||null==r.effectOut||"none"==r.effectOut)c.hide(),v&&v.hide(),o.remove_embeded_object(),r.unload&&(v&&v.remove(),c.remove());r.onHide(c.get(0))};this.centerPopup=function(){0>=f&&(f=c.width(),l=c.height(),150<f&&c.css({"max-width":f,"max-height":l}));if(r.responsive){var t=e(window).width(),n=e(window).height(),i=c.outerWidth(),s=c.outerHeight(),o=parseInt(c.css("padding-left"))+parseInt(c.css("padding-right")),h=parseInt(c.css("padding-top"))+parseInt(c.css("padding-bottom"));if(t<f+o+u||n<l+h+a){var o=parseInt(c.css("margin-left"))+parseInt(c.css("margin-right")),h=parseInt(c.css("margin-top"))+parseInt(c.css("margin-bottom")),p=c.width(),d=c.height();c.css({width:t-(i+o-p),height:n-(s+h-d)})}}u="center"==r.left?Math.floor(e(window).width()/2)-c.outerWidth()/2:r.left;a="center"==r.top?Math.floor(e(window).height()/2)-c.outerHeight()/2:r.top;c.css({left:u,top:a})};this.setContent=function(t,n,s){var u=n?n:i(t);s=s?s:function(){};d.html("");c.css({"max-width":"","max-height":""});if("html"==u)d.html(t),r.onComplete(c.get(0),u),s(c.get(0),u),p.hide(),o.centerPopup();else if("image"==u)n=new Image,n.src=t,e(n).load(function(){r.onComplete(c.get(0),u);s(c.get(0),u);p.hide();c.css({"max-width":e(this).width(),"max-height":e(this).height()});o.centerPopup()}),d.append(n);else if("ajax"==u)e.ajax({type:t.type,data:t.data,url:t.url,beforeSend:function(){},success:function(e){d.html(e);r.onComplete(c.get(0),u);s(c.get(0),u);p.hide();o.centerPopup()}});else if("iframe"==u)t=e(document.createElement("iframe")),t.attr("border",0),t.attr("frameBorder",0),t.attr("marginwidth",0),t.attr("marginheight",0),t.css({width:r.width,height:r.height}),t.get(0).src=r.href,t.load(function(){r.onComplete(c.get(0),u);s(c.get(0),u);p.hide();c.css({"max-width":e(this).width(),"max-height":e(this).height()});o.centerPopup()}),d.append(t);else if("flash"==u){var a;n=r.width;var f=r.height,l=r.flashvars,l=l||""==l?"autostart=1&autoplay=1&fullscreenbutton=1":l,h;h='<object width="'+n+'" height="'+f+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+('<param name="movie" value="'+t+'" /><param name="allowFullScreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="wmode" value="transparent" /><param name="autostart" value="true" /><param name="autoplay" value="true" /><param name="flashvars" value="'+l+'" /><param name="width" value="'+n+'" /><param name="height" value="'+f+'" />');h+='<embed src="'+t+'" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" autostart="true" autoplay="true" flashvars="'+l+'" wmode="transparent" width="'+n+'" height="'+f+'" style="margin: 0; padding: 0" />';h+="</object>";a=e(h);d.append(a);setTimeout(function(){r.onComplete(c.get(0),u);s(c.get(0),u);c.css({"max-width":"auto"!=r.width?r.width:a.width(),"max-height":"auto"!=r.height?r.height:a.height()});o.centerPopup();p.hide()},80)}else d.html(t),r.onComplete(c.get(0),u),s(c.get(0),u),o.centerPopup(),p.hide()};this.width=function(e,t){var n=f;e&&(f=e,void 0==t||t?c.animate({width:e,left:Math.floor(e/2)},"slow"):c.css("width",e));return n};this.height=function(e,t){var n=l;e&&(l=e,void 0==t||t?c.animate({height:e,top:Math.floor(e/2)},"slow"):c.css("height",e));return n};this.remove_embeded_object=function(){m&&d.html(" ")};this.get_box_size=function(){return{left:u,top:a,width:f,height:l}};return this}};r.fn.init.prototype=r.fn;r.fn.events=new function(){var e=jQuery(this);this.bind=function(t,n,r){return e.bind(t,n,r)};this.unbind=function(t,n){return e.unbind(t,n)};this.trigger=function(t,n){return e.trigger(t,n)}};t.fn.popup=r})(jQuery,speedo);$.fn.speedoPopup=function(e){e.href&&null==e.useFrame&&(e.useFrame=!0);if("random"==e.css3Effects){var t="none zoomIn zoomOut flip flipInHor flipInVer bounceIn pageTop flyIn fadeInScale scaleDown fadeSpin pulse leftSpeedIn rollIn rollOut pulseBody fadeSpinBody".split(" ");e.css3Effects=t[Math.floor(Math.random()*(t.length-1))]}e=$.extend(!0,{width:null,height:null,left:"center",top:"center",close:!0,closeCaption:"",theme:"default",htmlContent:"<p> Default content </p>",esc:!0,overlay:{opacity:.75,zindex:1e5},caption:null,href:null,overlayClose:!0,autoClose:!1,autoShow:!1,startCount:0,interval:30,effectIn:"none",effectOut:"none",css3Effects:!1,showOnEvent:"click",useFrame:!1,useAjax:!1,loadingImage:!1,unload:!1,draggable:!1,responsive:!0,ajaxContent:{url:"",type:"POST",data:null},groupGallery:!1,groupIndex:0,groupAutoPlay:!0,groupWait:5e3,loop:!0,buttons:null,onBeforeShow:function(){},onShow:function(){},onComplete:function(){},onHide:function(){},onClose:function(){}},e);var n=null;!this.data("unique-speedo-instance")||e.unload?(n=speedo().popup(e),e.autoShow?setTimeout(function(){n.create_popup()},e.autoShow):n.create_popup(),this.data("unique-speedo-instance",n)):(n=this.data("unique-speedo-instance"),e.autoShow?setTimeout(function(){n.showPopup()},e.autoShow):(n.showPopup(),n.centerPopup()));return n};$(function(){$.speedoPopup={};$.speedoPopup.smartSkins={};$.speedoPopup.browser_ie=speedo().browser.is_ie;$.speedoPopup.registerSmartSkin=function(e,t){$.speedoPopup.smartSkins[e]=t};$(document).on("click tap",".speedo-popup",function(e){e.preventDefault();var t=$(this);e=t.attr("href");var n=[],r=t.attr("rel");r&&""!=r&&$('.speedo-popup[rel="'+r+'"]').each(function(){var e=$(this);e.get(0);t.get(0);n.push({url:e.attr("href"),title:e.attr("title")})});r=void 0!=$(this).data("speedoOptions")?$(this).data("speedoOptions"):speedo().utility.query_parameters(e);r=$.extend({htmlContent:!1,effectIn:"fade",effectOut:"fade"},r);r.useAjax&&(r.ajaxContent={url:e,type:"GET",data:null});r.href=e;$(this).speedoPopup(r)})});(function(e,t){var n=function(){return new n.fn.init};n.fn=n.prototype={version:"1.0.1",constructor:n,init:function(){var t={};this.register_module=function(e,n){t[e]=n};this.deregister_module=function(e){t[e]=null};this.clear=function(){t={}};this.execute=function(n,r){for(key in t){var i=t[key];e.isFunction(i)&&(i=i.apply(n,[r]),null!=i&&i.init())}return null};return this}};n.fn.init.prototype=n.fn;t.fn.modules=n()})(jQuery,speedo().popup);(function(e,t){t.fn.modules.register_module("draggable",function(t){function n(e){var t=u.position();o.bind("mousemove",{startX:e.clientX,startY:e.clientY,offset:t},r).bind("mouseup",i)}function r(e){var t=e.data.offset;u.css({left:e.clientX-e.data.startX+t.left,top:e.clientY-e.data.startY+t.top})}function i(){o.unbind("mousemove",r).unbind("mouseup",i)}var s=null,o=e(window),u=this.container;this.init=function(){t.draggable&&(s=e(document.createElement("div")),s.addClass("speedo-popup-drag-area"),s.bind("mousedown",n),u.append(s))};return this})})(jQuery,speedo().popup);(function(e,t,n){t.fn.modules.register_module("effects",function(t){function r(r,i,s,f,l){if(i&&"none"!=i&&(!n().browser.is_ie||9<n().browser.is_ie)){var c=function(){e.isFunction(l)&&l();o.unbind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",c)};o.bind("animationend webkitAnimationEnd MSAnimationEnd oAnimationEnd",c);s?(o.show(),u&&u.show(),e("body").addClass("speedo-effect-"+i.toLowerCase()+"-active"),o.removeClass("speedo-effect-"+i.toLowerCase()+"-reverse"),o.addClass("speedo-effect-"+i.toLowerCase()+"-normal")):(e("body").removeClass("speedo-effect-"+i.toLowerCase()+"-active"),o.addClass("speedo-effect-"+i.toLowerCase()+"-reverse"),o.removeClass("speedo-effect-"+i.toLowerCase()+"-normal"),u&&!f&&u.hide());o.css({"-webkit-animation-play-state":"running","-moz-animation-play-state":"running","-o-animation-play-state":"running","-ms-animation-play-state":"running","animation-play-state":"running"});return!0}return r&&"none"!=r?(e.isFunction(r)?t.overlay?r(o.get(0),u.get(0)):r(o.get(0)):e.isArray(r)?a.animatePopup(r[0],r[1],s,l):a.animatePopup(r,"slow",s,l),!0):!1}function i(){var e=a.get_box_size();f=e.left;l=e.top;c=e.width;h=e.height;r(t.effectIn,t.css3Effects,!0)||(o.show(),u&&u.show())}function s(){var e=a.get_box_size();f=e.left;l=e.top;c=e.width;h=e.height;r(t.effectOut,t.css3Effects,!1,!1,function(){a.remove_embeded_object();u&&u.hide();o.hide();t.unload&&(u&&u.remove(),o.remove())})}e(window);var o=this.container,u=this.overlay,a=this,f=0,l=0,c=0,h=0;this.init=function(){a.extend.add_action("show",i);a.extend.add_action("hide",s)};this.animatePopup=function(t,r,i,s){s=e.isFunction(s)?s:function(){};i&&(o.hide(),u&&u.hide());switch(t){case"slideLeft":i?(o.css("left",-c),o.stop().animate({left:f,opacity:"toggle"},r,s)):o.stop().animate({left:-c,opacity:"toggle"},r,s);break;case"slideRight":i?(o.css("left",e(window).width()+c),o.stop().animate({left:f,opacity:"toggle"},r,s)):o.stop().animate({left:e(window).width()+c,opacity:"toggle"},r,s);break;case"slideTop":i?(o.css("top",-h),o.stop().animate({top:l,opacity:"toggle"},r,s)):o.stop().animate({top:-h,opacity:"toggle"},r,s);break;case"slideBottom":i?(o.css("top",e(window).height()+h),o.stop().animate({top:l,opacity:"toggle"},r,s)):o.stop().animate({top:e(window).height()+h,opacity:"toggle"},r,s);break;case"slideZoom":i?(o.css("top",-h),o.css("left",f+c/2),o.stop().animate({width:"toggle",left:f,top:l,opacity:"toggle"},r,s)):o.stop().animate({top:-h,left:f+c/2,width:"toggle",opacity:"toggle"},r,s);break;case"growBox":o.stop().animate({width:"toggle",height:"toggle"},s);break;case"incerto":i?(o.css("left",f+c/2),o.stop().animate({width:"toggle",left:f},r,s),o.css("top",l+h/2),o.animate({top:l},r,s)):(o.stop().animate({top:l+h/2},r,s),o.animate({width:"toggle",left:f+c/2},r,s));break;default:t=i?"fadeIn":"fadeOut",o.stop(),o[t](r,s)}u&&u.stop().animate({opacity:"toggle"},r,function(){!0==n().browser.is_ie&&8>=n().browser.version.high&&u.get(0).style.removeAttribute("filter",!1)})};return a})})(jQuery,speedo().popup,speedo);(function(e,t,n,r){t.fn.modules.register_module("smartskin",function(n){function i(){t.SmartSkin.run_skin(n.theme,u);if(void 0!=e.speedoPopup.smartSkins[n.theme])e.speedoPopup.smartSkins[n.theme](o,s)}e(r);var s=this.container,o=this.overlay,u=this;this.init=function(){u.extend.add_action("show",i)};return u});t.SmartSkin=new function(){var e={};this.register_skin=function(t,n){e[t]=n};this.run_skin=function(t,n){if(void 0!=e[t])e[t](n.overlay,n.container)}}})(jQuery,speedo().popup,speedo,window);(function(e,t,n,r){t.fn.modules.register_module("audio",function(t){function n(){s.load_audio(t.mp3Path,t.oggPath)}function i(){s.audio_element.stop().animate({volume:0},"slow",function(){s.audio_element.remove()})}e(r);var s=this;this.audio_element=null;this.init=function(){t=e.extend(t,{autoplayAudio:!0,loop:!1,mp3Path:void 0,oggPath:void 0,volume:1,onAudioStart:function(){},onAudioStop:function(){}});if(void 0!=t.mp3Path||void 0!=t.oggPath)s.extend.add_action("show",n),s.extend.add_action("hide",i)};this.load_audio=function(n,r){var i=e(document.createElement("audio"));t.autoplayAudio&&i.attr("autoplay","autoplay");t.loop&&i.attr("loop","loop");i.get(0).volume=0;i.bind("play",function(e){t.onAudioStart(e);s.audio_element.stop().animate({volume:t.volume},2e3)});i.bind("stop pause ended",t.onAudioStop);var o=e(document.createElement("source"));o.attr("src",r).attr("type","audio/ogg");i.append(o);o=e(document.createElement("source"));o.attr("src",n).attr("type","audio/mpeg");i.append(o);e("body").append(i);s.audio_element=i};this.play_audio=function(){null!=s.audio_element&&s.audio_element.get(0).play()};this.stop_audio=function(){null!=s.audio_element&&s.audio_element.get(0).pause()};this.get_audio_element=function(){return this.audio_element};return s})})(jQuery,speedo().popup,speedo,window);
